# TanStack Start + Cloudflare ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ

## ğŸ“ ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ 

```text
.
â”œâ”€â”€ .vscode                      # VSCodeè¨­å®šãƒ•ã‚¡ã‚¤ãƒ«
â”œâ”€â”€ dist                         # ãƒ“ãƒ«ãƒ‰å‡ºåŠ›ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª
â”‚   â”œâ”€â”€ client                   # â†’ ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚µã‚¤ãƒ‰ãƒ“ãƒ«ãƒ‰å‡ºåŠ›
â”‚   â”‚   â””â”€â”€ assets               # â†’ é™çš„ã‚¢ã‚»ãƒƒãƒˆï¼ˆCSSã€JSã€ç”»åƒãªã©ï¼‰
â”‚   â””â”€â”€ server                   # â†’ ã‚µãƒ¼ãƒãƒ¼ã‚µã‚¤ãƒ‰ãƒ“ãƒ«ãƒ‰å‡ºåŠ›
â”‚       â”œâ”€â”€ .vite                # â†’ Viteãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿
â”‚       â””â”€â”€ assets               # â†’ ã‚µãƒ¼ãƒãƒ¼ç”¨ã‚¢ã‚»ãƒƒãƒˆ
â”œâ”€â”€ public                       # é™çš„ãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆãã®ã¾ã¾ã‚³ãƒ”ãƒ¼ã•ã‚Œã‚‹ï¼‰
â”‚   â”œâ”€â”€ favicon.ico
â”‚   â”œâ”€â”€ logo192.png
â”‚   â”œâ”€â”€ logo512.png
â”‚   â”œâ”€â”€ manifest.json
â”‚   â””â”€â”€ robots.txt
â”œâ”€â”€ src                          # ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã®ãƒ«ãƒ¼ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª
â”‚   â”œâ”€â”€ components               # â†’ å†åˆ©ç”¨å¯èƒ½ãªReactã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”‚   â”‚   â””â”€â”€ Header.tsx           # â†’ ãƒ˜ãƒƒãƒ€ãƒ¼ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”‚   â”œâ”€â”€ routes                   # â†’ TanStack Routerã®ãƒšãƒ¼ã‚¸å®šç¾©ï¼ˆãƒ•ã‚¡ã‚¤ãƒ«ãƒ™ãƒ¼ã‚¹ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ï¼‰
â”‚   â”‚   â”œâ”€â”€ __root.tsx           # â†’ ãƒ«ãƒ¼ãƒˆãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã€å…¨ãƒšãƒ¼ã‚¸å…±é€šã®HTMLæ§‹é€ 
â”‚   â”‚   â”œâ”€â”€ index.tsx            # â†’ ãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸ï¼ˆ/ï¼‰
â”‚   â”‚   â”œâ”€â”€ api.demo-names.ts    # â†’ APIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆï¼ˆ/api/demo-namesï¼‰
â”‚   â”‚   â”œâ”€â”€ demo.start.api-request.tsx  # â†’ APIä½¿ç”¨ä¾‹ãƒšãƒ¼ã‚¸
â”‚   â”‚   â””â”€â”€ demo.start.server-funcs.tsx # â†’ ã‚µãƒ¼ãƒãƒ¼é–¢æ•°ãƒ‡ãƒ¢ãƒšãƒ¼ã‚¸
â”‚   â”œâ”€â”€ router.tsx               # â†’ ãƒ«ãƒ¼ã‚¿ãƒ¼è¨­å®šã¨ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ä½œæˆ
â”‚   â”œâ”€â”€ styles.css               # â†’ ã‚°ãƒ­ãƒ¼ãƒãƒ«ã‚¹ã‚¿ã‚¤ãƒ«
â”‚   â”œâ”€â”€ logo.svg                 # â†’ ãƒ­ã‚´ãƒ•ã‚¡ã‚¤ãƒ«
â”‚   â””â”€â”€ routeTree.gen.ts         # â†’ TanStack RouterãŒè‡ªå‹•ç”Ÿæˆã™ã‚‹ãƒ«ãƒ¼ãƒˆå®šç¾©
â”œâ”€â”€ types                        # â†’ TypeScriptå‹å®šç¾©ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª
â”‚   â””â”€â”€ env.d.ts                 # â†’ ã‚«ã‚¹ã‚¿ãƒ ç’°å¢ƒå¤‰æ•°ãƒ»ãƒã‚¤ãƒ³ãƒ‡ã‚£ãƒ³ã‚°å‹å®šç¾©
â”œâ”€â”€ .cta.json                    # CTAè¨­å®šãƒ•ã‚¡ã‚¤ãƒ«
â”œâ”€â”€ .gitignore                   # Gité™¤å¤–è¨­å®š
â”œâ”€â”€ AGENTS.md                    # ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆè¨­å®šãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
â”œâ”€â”€ MAP.md                       # ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹é€ èª¬æ˜ï¼‰
â”œâ”€â”€ package.json                 # ä¾å­˜é–¢ä¿‚ã¨ã‚¹ã‚¯ãƒªãƒ—ãƒˆå®šç¾©
â”œâ”€â”€ pnpm-lock.yaml              # pnpmä¾å­˜é–¢ä¿‚ãƒ­ãƒƒã‚¯ãƒ•ã‚¡ã‚¤ãƒ«
â”œâ”€â”€ README.md                    # ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆèª¬æ˜
â”œâ”€â”€ tsconfig.json               # TypeScriptè¨­å®š
â”œâ”€â”€ vite.config.ts              # Vite + Cloudflareè¨­å®š
â”œâ”€â”€ worker-configuration.d.ts   # Wranglerè‡ªå‹•ç”Ÿæˆã®Cloudflareå‹å®šç¾©
â””â”€â”€ wrangler.jsonc              # Cloudflare Workersè¨­å®šãƒ•ã‚¡ã‚¤ãƒ«

6 directories, 20 files
```

## ğŸ¯ ä¸»è¦ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®å½¹å‰²

### `/src/routes/` - ãƒšãƒ¼ã‚¸ã¨APIå®šç¾©
- **ãƒ•ã‚¡ã‚¤ãƒ«ãƒ™ãƒ¼ã‚¹ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°**: ãƒ•ã‚¡ã‚¤ãƒ«åãŒURLãƒ‘ã‚¹ã«ãªã‚‹
- **`__root.tsx`**: å…¨ãƒšãƒ¼ã‚¸å…±é€šã®ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆï¼ˆHTMLæ§‹é€ ã€devtoolsè¨­å®šï¼‰
- **`index.tsx`**: ãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
- **`api.*.ts`**: ã‚µãƒ¼ãƒãƒ¼ã‚µã‚¤ãƒ‰APIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ
- **ä½¿ç”¨æ–¹æ³•**: æ–°ã—ã„ãƒšãƒ¼ã‚¸ã¯`routes/`ä¸‹ã«ãƒ•ã‚¡ã‚¤ãƒ«ã‚’è¿½åŠ ã™ã‚‹ã ã‘

### `/src/components/` - å†åˆ©ç”¨å¯èƒ½ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
- **Reactã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ**: ãƒšãƒ¼ã‚¸é–“ã§å…±æœ‰ã•ã‚Œã‚‹éƒ¨å“
- **ä½¿ç”¨æ–¹æ³•**: `import Header from '../components/Header'`ã§ã‚¤ãƒ³ãƒãƒ¼ãƒˆ

### `/types/` - TypeScriptå‹å®šç¾©
- **`env.d.ts`**: ã‚«ã‚¹ã‚¿ãƒ ç’°å¢ƒå¤‰æ•°ã‚„Cloudflareãƒã‚¤ãƒ³ãƒ‡ã‚£ãƒ³ã‚°å‹
- **ä½¿ç”¨æ–¹æ³•**: TanStack Start + Cloudflareç”¨ã®å‹æ‹¡å¼µ

### `/dist/` - ãƒ“ãƒ«ãƒ‰å‡ºåŠ›
- **`client/`**: ãƒ–ãƒ©ã‚¦ã‚¶ç”¨ã®é™çš„ãƒ•ã‚¡ã‚¤ãƒ«
- **`server/`**: Cloudflare Workersç”¨ã®ã‚µãƒ¼ãƒãƒ¼ã‚³ãƒ¼ãƒ‰
- **è‡ªå‹•ç”Ÿæˆ**: `pnpm build`ã§ä½œæˆã•ã‚Œã‚‹

## ğŸš€ Cloudflareè¨­å®šãƒ•ã‚¡ã‚¤ãƒ«

### `wrangler.jsonc`
- Cloudflare Workersè¨­å®š
- ãƒ‡ãƒ—ãƒ­ã‚¤æ™‚ã®å‹•ä½œã‚’åˆ¶å¾¡
- `@tanstack/react-start/server-entry`ã‚’ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆã«æŒ‡å®š

### `worker-configuration.d.ts`
- WranglerãŒè‡ªå‹•ç”Ÿæˆã™ã‚‹TypeScriptå‹å®šç¾©
- Cloudflareãƒã‚¤ãƒ³ãƒ‡ã‚£ãƒ³ã‚°ï¼ˆKVã€R2ã€D1ãªã©ï¼‰ã®å‹æƒ…å ±
- `pnpm run cf-typegen`ã§æ›´æ–°

### `vite.config.ts`
- Cloudflareäº’æ›ãƒ“ãƒ«ãƒ‰è¨­å®š
- `@cloudflare/vite-plugin`ã§Workersç’°å¢ƒã«æœ€é©åŒ–
- `target: 'cloudflare-module'`ã§Cloudflareå‘ã‘ãƒ“ãƒ«ãƒ‰

## ğŸ“ é–‹ç™ºãƒ•ãƒ­ãƒ¼

1. **é–‹ç™ºé–‹å§‹**: `pnpm dev`
2. **ãƒšãƒ¼ã‚¸è¿½åŠ **: `src/routes/`ä¸‹ã«ãƒ•ã‚¡ã‚¤ãƒ«ä½œæˆ
3. **ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆä½œæˆ**: `src/components/`ä¸‹ã«è¿½åŠ 
4. **ãƒ“ãƒ«ãƒ‰**: `pnpm build`
5. **ãƒ‡ãƒ—ãƒ­ã‚¤**: `pnpm deploy`

## ğŸ”§ ä¸»è¦ã‚¹ã‚¯ãƒªãƒ—ãƒˆ

- `pnpm dev` - é–‹ç™ºã‚µãƒ¼ãƒãƒ¼èµ·å‹•
- `pnpm build` - Cloudflareå‘ã‘ãƒ“ãƒ«ãƒ‰
- `pnpm deploy` - Cloudflareã«ãƒ‡ãƒ—ãƒ­ã‚¤
- `pnpm run cf-typegen` - Cloudflareå‹å®šç¾©ç”Ÿæˆ
